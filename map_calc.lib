http://developer.mbed.org/teams/P542-Labs-Segv/code/map_calc/#2f24a3c18646
